<%- include('../partials/header') %>

<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h2><%= locals.searchQuery ? `Results for "${searchQuery}"` : 'Who to Follow' %></h2>

        <form action="/users" method="GET" style="display: flex; gap: 0.5rem;">
            <input
                type="text"
                name="q"
                placeholder="Find users..."
                value="<%= locals.searchQuery || '' %>"
                style="padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;"
            >
            <button type="submit" class="btn-primary btn-sm">Search</button>
        </form>
    </div>

    <div class="user-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
        <% if (users.length === 0) { %>
            <p>You follow everyone! ðŸ¤¯</p>
        <% } else { %>
            <% users.forEach(user => { %>
                <div class="profile-card" style="text-align: center;">
                    <img src="<%= user.avatarUrl %>" alt="<%= user.username %>" class="avatar-small" style="width: 80px; height: 80px; margin-bottom: 0.5rem;">
                    <h3>@<%= user.username %></h3>

                    <form action="/users/<%= user.id %>/follow" method="POST">
                        <button type="submit" class="btn-primary btn-sm">Follow</button>
                    </form>
                </div>
            <% }) %>
        <% } %>
    </div>
</div>

<%- include('../partials/footer') %>
