<%- include('../partials/header') %>

<div class="container">
    <h2>Follow Requests</h2>

    <% if (requests.length === 0) { %>
        <p class="empty-state">No pending requests.</p>
    <% } else { %>
        <div class="user-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1rem; margin-top: 1rem;">
            <% requests.forEach(request => { %>
                <div class="profile-card" style="display: grid; gap: 0.75rem;">
                    <div style="display: flex; gap: 0.75rem; align-items: center;">
                        <img src="<%= request.follower.avatarUrl %>" alt="<%= request.follower.username %>" class="avatar-small" style="width: 56px; height: 56px;">
                        <div>
                            <strong>@<%= request.follower.username %></strong>
                            <div class="date">Requested <%= new Date(request.createdAt).toLocaleDateString() %></div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <form action="/users/requests/<%= request.id %>/accept" method="POST">
                            <input type="hidden" name="csrfToken" value="<%= csrfToken %>">
                            <button type="submit" class="btn-primary">Accept</button>
                        </form>
                        <form action="/users/requests/<%= request.id %>/reject" method="POST">
                            <input type="hidden" name="csrfToken" value="<%= csrfToken %>">
                            <button type="submit" class="btn-outline">Reject</button>
                        </form>
                    </div>
                </div>
            <% }) %>
        </div>
    <% } %>
</div>

<%- include('../partials/footer') %>
